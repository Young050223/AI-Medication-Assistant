/**
 * @file i18n/index.ts
 * @description 国际化配置，支持简体中文、繁体中文、英文，自动检测系统语言
 * @author AI用药助手开发团队
 * @created 2026-01-17
 * @modified 2026-01-30 - 添加语言检测器和完整翻译
 */

import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import LanguageDetector from 'i18next-browser-languagedetector';

// 语言资源
const resources = {
    'zh-CN': {
        translation: {
            // 通用
            app: {
                name: 'AI用药助手',
                loading: '加载中...',
                error: '出错了',
                retry: '重试',
                confirm: '确认',
                cancel: '取消',
                save: '保存',
                saving: '保存中...',
                next: '下一步',
                back: '返回',
                skip: '跳过',
                delete: '删除',
                add: '添加',
                edit: '编辑',
                close: '关闭',
                welcome: '欢迎, {{name}}!',
                user: '用户',
            },
            // 认证相关
            auth: {
                login: '登录',
                register: '注册',
                logout: '退出登录',
                email: '邮箱',
                phone: '手机号',
                password: '密码',
                confirmPassword: '确认密码',
                displayName: '姓名',
                loginTitle: '欢迎回来',
                loginSubtitle: '请登录您的账户',
                registerTitle: '创建账户',
                registerSubtitle: '开始您的健康管理之旅',
                noAccount: '还没有账户？',
                hasAccount: '已有账户？',
                loginError: '登录失败，请检查您的邮箱和密码',
                registerError: '注册失败，请稍后重试',
                passwordMismatch: '两次输入的密码不一致',
                emailRequired: '请输入邮箱',
                passwordRequired: '请输入密码',
                nameRequired: '请输入姓名',
            },
            // 健康档案
            healthProfile: {
                title: '健康档案',
                subtitle: '请填写您的基本健康信息',
                basicInfo: '基本信息',
                birthDate: '出生日期',
                gender: '性别',
                male: '男',
                female: '女',
                other: '其他',
                height: '身高 (cm)',
                weight: '体重 (kg)',
                medicalHistory: '过往病史',
                medicalHistoryHint: '请描述您的主要病史',
                allergies: '过敏药物',
                allergiesHint: '请列出您过敏的药物',
                saveSuccess: '健康档案保存成功',
                saveError: '保存失败，请稍后重试',
                required: '请先完成健康档案',
                birthDateRequired: '请填写出生日期',
                genderRequired: '请选择性别',
                heightRequired: '请填写身高',
                weightRequired: '请填写体重',
            },
            // 导航
            nav: {
                home: '首页',
                records: '记录',
                reminders: '提醒',
                profile: '我的',
                medications: '用药',
            },
            // 首页
            landing: {
                goodMorning: '早上好',
                goodAfternoon: '下午好',
                goodEvening: '晚上好',
                user: '用户',
                todayMedication: '今日用药',
                pending: '待服用',
                completed: '已完成',
                missed: '已错过',
                nextReminder: '下次提醒',
                tomorrowReminder: '明日提醒',
                noSchedule: '暂无用药计划',
                quickActions: '快捷操作',
                scanRecord: '扫描病例',
                scanRecordDesc: '拍照识别处方',
                reminders: '用药提醒',
                remindersDesc: '管理服药计划',
                healthProfile: '健康档案',
                healthProfileDesc: '个人健康信息',
                drugGuide: '用药指南',
                drugGuideDesc: '药物知识库',
                recentRecords: '最近记录',
                noRecords: '暂无用药记录',
                takeMedicine: '服用',
            },
            // 服药计划
            schedule: {
                title: '服药计划',
                todayMedication: '今日用药',
                allSchedules: '所有计划',
                noScheduleToday: '今日暂无用药计划',
                addSchedule: '添加服药计划',
                editSchedule: '编辑服药计划',
                deleteConfirm: '确定要删除这个服药计划吗？',
                medicationName: '药物名称',
                medicationNamePlaceholder: '如：阿莫西林胶囊',
                medicationNameRequired: '请输入药物名称',
                dosage: '剂量',
                dosagePlaceholder: '如：0.5g / 每次1粒',
                frequency: '服用频率',
                reminderTime: '提醒时间',
                addReminderTime: '添加提醒时间',
                duration: '疗程（天）',
                instructions: '用法说明',
                instructionsPlaceholder: '如：饭后服用',
                confirmTake: '确认服用',
                taken: '已服用',
                feedback: '反馈',
                scheduleCount: '共 {{total}} 个计划，今日活跃 {{active}} 个',
            },
            // 服用频率选项
            frequency: {
                onceDaily: '每日1次',
                twiceDaily: '每日2次',
                thriceDaily: '每日3次',
                fourTimesDaily: '每日4次',
                asNeeded: '需要时',
            },
            // 服药反馈
            feedback: {
                title: '服药反馈',
                selectMedication: '选择药物',
                selectMedicationPlaceholder: '请选择药物...',
                howDoYouFeel: '服药后感觉如何？',
                voiceInput: '语音输入',
                textInput: '文字输入',
                pressToSpeak: '按住按钮说话',
                voiceUnavailable: '语音识别在此设备上不可用',
                useTextInput: '使用文字输入',
                recording: '正在录音...',
                tapToRecord: '点击开始录音',
                speakYourFeelings: '请说出您的感受...',
                clear: '清除',
                describeFeelings: '请描述您的感受',
                textPlaceholder: '例如：服药后感觉精神好了一些，但有轻微头晕...',
                sideEffectsTitle: '是否有以下不适？（可多选）',
                save: '保存反馈',
                saved: '反馈已保存',
                medicationRequired: '请选择药物',
                contentRequired: '请输入反馈内容',
            },
            // 心情选项
            mood: {
                good: '感觉不错',
                neutral: '和平时一样',
                bad: '有些不适',
            },
            // 副作用选项
            sideEffects: {
                dizziness: '头晕',
                nausea: '恶心',
                fatigue: '疲劳',
                insomnia: '失眠',
                appetiteLoss: '食欲下降',
                rash: '皮疹',
                diarrhea: '腹泻',
                constipation: '便秘',
                dryMouth: '口干',
                other: '其他',
            },
            // 病例上传
            upload: {
                title: '上传病例',
                profileRequired: '请先完成健康档案',
                profileRequiredDesc: '上传病例前，需要先填写您的基本健康信息',
                goToProfile: '去填写健康档案',
                step1Title: '第一步：上传病例照片',
                step1Hint: '请拍摄或选择您的处方单、病历照片',
                takePhoto: '拍照',
                fromGallery: '从相册选择',
                step2Title: '第二步：确认照片',
                retake: '重新拍照',
                startRecognize: '开始识别',
                recognizing: '识别中...',
                step3Title: '第三步：确认用药信息',
                step3Hint: '请核对以下识别结果，可以手动修改',
                medicationNumber: '药物 {{number}}',
                medicationName: '药物名称',
                medicationNamePlaceholder: '请输入药物名称',
                dosage: '剂量',
                dosagePlaceholder: '如：0.5g',
                frequencyLabel: '服用频率',
                frequencyPlaceholder: '如：每日3次',
                instructionsLabel: '用法说明',
                addMedication: '手动添加药物',
                reupload: '重新上传',
                confirmAndSave: '确认并保存',
            },
            // AI Agent
            agent: {
                title: '药物分析',
                inputPlaceholder: '请输入药物名称...',
                analyze: '分析',
                analyzing: '分析中...',
                retry: '重试',
                standardName: '标准名',
                riskAlerts: '风险提示',
                summary: '分析总结',
                keyPoints: '关键要点',
                warnings: '注意事项',
                sideEffects: '常见副作用',
                foodInteractions: '食物/饮品禁忌',
                adverseStats: '不良反应统计',
                totalReports: '总报告数',
                seriousRate: '严重事件比例',
                topReactions: '常见反应',
                dataSource: '数据来源',
                dataRange: '数据范围',
                lastUpdated: '更新时间',
                sources: '信息来源',
                source: '来源',
                newAnalysis: '分析其他药物',
                emptyHint: '输入药物名称开始分析',
                emptySubHint: '支持中英文药物名称',
            },
            common: {
                back: '返回',
            },
        },
    },
    'zh-TW': {
        translation: {
            app: {
                name: 'AI用藥助手',
                loading: '載入中...',
                error: '出錯了',
                retry: '重試',
                confirm: '確認',
                cancel: '取消',
                save: '儲存',
                saving: '儲存中...',
                next: '下一步',
                back: '返回',
                skip: '跳過',
                delete: '刪除',
                add: '新增',
                edit: '編輯',
                close: '關閉',
                welcome: '歡迎, {{name}}!',
                user: '用戶',
            },
            auth: {
                login: '登入',
                register: '註冊',
                logout: '退出登入',
                email: '電郵',
                phone: '手機號',
                password: '密碼',
                confirmPassword: '確認密碼',
                displayName: '姓名',
                loginTitle: '歡迎回來',
                loginSubtitle: '請登入您的帳戶',
                registerTitle: '創建帳戶',
                registerSubtitle: '開始您的健康管理之旅',
                noAccount: '還沒有帳戶？',
                hasAccount: '已有帳戶？',
                loginError: '登入失敗，請檢查您的電郵和密碼',
                registerError: '註冊失敗，請稍後重試',
                passwordMismatch: '兩次輸入的密碼不一致',
                emailRequired: '請輸入電郵',
                passwordRequired: '請輸入密碼',
                nameRequired: '請輸入姓名',
            },
            healthProfile: {
                title: '健康檔案',
                subtitle: '請填寫您的基本健康信息',
                basicInfo: '基本信息',
                birthDate: '出生日期',
                gender: '性別',
                male: '男',
                female: '女',
                other: '其他',
                height: '身高 (cm)',
                weight: '體重 (kg)',
                medicalHistory: '過往病史',
                medicalHistoryHint: '請描述您的主要病史',
                allergies: '過敏藥物',
                allergiesHint: '請列出您過敏的藥物',
                saveSuccess: '健康檔案儲存成功',
                saveError: '儲存失敗，請稍後重試',
                required: '請先完成健康檔案',
                birthDateRequired: '請填寫出生日期',
                genderRequired: '請選擇性別',
                heightRequired: '請填寫身高',
                weightRequired: '請填寫體重',
            },
            nav: {
                home: '首頁',
                records: '記錄',
                reminders: '提醒',
                profile: '我的',
                medications: '用藥',
            },
            landing: {
                goodMorning: '早安',
                goodAfternoon: '午安',
                goodEvening: '晚安',
                user: '用戶',
                todayMedication: '今日用藥',
                pending: '待服用',
                completed: '已完成',
                missed: '已錯過',
                nextReminder: '下次提醒',
                tomorrowReminder: '明日提醒',
                noSchedule: '暫無用藥計劃',
                quickActions: '快捷操作',
                scanRecord: '掃描病例',
                scanRecordDesc: '拍照識別處方',
                reminders: '用藥提醒',
                remindersDesc: '管理服藥計劃',
                healthProfile: '健康檔案',
                healthProfileDesc: '個人健康信息',
                drugGuide: '用藥指南',
                drugGuideDesc: '藥物知識庫',
                recentRecords: '最近記錄',
                noRecords: '暫無用藥記錄',
                takeMedicine: '服用',
            },
            schedule: {
                title: '服藥計劃',
                todayMedication: '今日用藥',
                allSchedules: '所有計劃',
                noScheduleToday: '今日暫無用藥計劃',
                addSchedule: '新增服藥計劃',
                editSchedule: '編輯服藥計劃',
                deleteConfirm: '確定要刪除這個服藥計劃嗎？',
                medicationName: '藥物名稱',
                medicationNamePlaceholder: '如：阿莫西林膠囊',
                medicationNameRequired: '請輸入藥物名稱',
                dosage: '劑量',
                dosagePlaceholder: '如：0.5g / 每次1粒',
                frequency: '服用頻率',
                reminderTime: '提醒時間',
                addReminderTime: '新增提醒時間',
                duration: '療程（天）',
                instructions: '用法說明',
                instructionsPlaceholder: '如：飯後服用',
                confirmTake: '確認服用',
                taken: '已服用',
                feedback: '反饋',
                scheduleCount: '共 {{total}} 個計劃，今日活躍 {{active}} 個',
            },
            frequency: {
                onceDaily: '每日1次',
                twiceDaily: '每日2次',
                thriceDaily: '每日3次',
                fourTimesDaily: '每日4次',
                asNeeded: '需要時',
            },
            feedback: {
                title: '服藥反饋',
                selectMedication: '選擇藥物',
                selectMedicationPlaceholder: '請選擇藥物...',
                howDoYouFeel: '服藥後感覺如何？',
                voiceInput: '語音輸入',
                textInput: '文字輸入',
                pressToSpeak: '按住按鈕說話',
                voiceUnavailable: '語音識別在此設備上不可用',
                useTextInput: '使用文字輸入',
                recording: '正在錄音...',
                tapToRecord: '點擊開始錄音',
                speakYourFeelings: '請說出您的感受...',
                clear: '清除',
                describeFeelings: '請描述您的感受',
                textPlaceholder: '例如：服藥後感覺精神好了一些，但有輕微頭暈...',
                sideEffectsTitle: '是否有以下不適？（可多選）',
                save: '儲存反饋',
                saved: '反饋已儲存',
                medicationRequired: '請選擇藥物',
                contentRequired: '請輸入反饋內容',
            },
            mood: {
                good: '感覺不錯',
                neutral: '和平時一樣',
                bad: '有些不適',
            },
            sideEffects: {
                dizziness: '頭暈',
                nausea: '噁心',
                fatigue: '疲勞',
                insomnia: '失眠',
                appetiteLoss: '食慾下降',
                rash: '皮疹',
                diarrhea: '腹瀉',
                constipation: '便秘',
                dryMouth: '口乾',
                other: '其他',
            },
            upload: {
                title: '上傳病例',
                profileRequired: '請先完成健康檔案',
                profileRequiredDesc: '上傳病例前，需要先填寫您的基本健康信息',
                goToProfile: '去填寫健康檔案',
                step1Title: '第一步：上傳病例照片',
                step1Hint: '請拍攝或選擇您的處方單、病歷照片',
                takePhoto: '拍照',
                fromGallery: '從相簿選擇',
                step2Title: '第二步：確認照片',
                retake: '重新拍照',
                startRecognize: '開始識別',
                recognizing: '識別中...',
                step3Title: '第三步：確認用藥信息',
                step3Hint: '請核對以下識別結果，可以手動修改',
                medicationNumber: '藥物 {{number}}',
                medicationName: '藥物名稱',
                medicationNamePlaceholder: '請輸入藥物名稱',
                dosage: '劑量',
                dosagePlaceholder: '如：0.5g',
                frequencyLabel: '服用頻率',
                frequencyPlaceholder: '如：每日3次',
                instructionsLabel: '用法說明',
                addMedication: '手動新增藥物',
                reupload: '重新上傳',
                confirmAndSave: '確認並儲存',
            },
            agent: {
                title: '藥物分析',
                inputPlaceholder: '請輸入藥物名稱...',
                analyze: '分析',
                analyzing: '分析中...',
                retry: '重試',
                standardName: '標準名',
                riskAlerts: '風險提示',
                summary: '分析總結',
                keyPoints: '關鍵要點',
                warnings: '注意事項',
                sideEffects: '常見副作用',
                foodInteractions: '食物/飲品禁忌',
                adverseStats: '不良反應統計',
                totalReports: '總報告數',
                seriousRate: '嚴重事件比例',
                topReactions: '常見反應',
                dataSource: '數據來源',
                dataRange: '數據範圍',
                lastUpdated: '更新時間',
                sources: '信息來源',
                source: '來源',
                newAnalysis: '分析其他藥物',
                emptyHint: '輸入藥物名稱開始分析',
                emptySubHint: '支持中英文藥物名稱',
            },
            common: {
                back: '返回',
            },
        },
    },
    'en': {
        translation: {
            app: {
                name: 'AI Medication Assistant',
                loading: 'Loading...',
                error: 'Error',
                retry: 'Retry',
                confirm: 'Confirm',
                cancel: 'Cancel',
                save: 'Save',
                saving: 'Saving...',
                next: 'Next',
                back: 'Back',
                skip: 'Skip',
                delete: 'Delete',
                add: 'Add',
                edit: 'Edit',
                close: 'Close',
                welcome: 'Welcome, {{name}}!',
                user: 'User',
            },
            auth: {
                login: 'Login',
                register: 'Register',
                logout: 'Logout',
                email: 'Email',
                phone: 'Phone',
                password: 'Password',
                confirmPassword: 'Confirm Password',
                displayName: 'Name',
                loginTitle: 'Welcome Back',
                loginSubtitle: 'Please login to your account',
                registerTitle: 'Create Account',
                registerSubtitle: 'Start your health management journey',
                noAccount: "Don't have an account?",
                hasAccount: 'Already have an account?',
                loginError: 'Login failed, please check your email and password',
                registerError: 'Registration failed, please try again later',
                passwordMismatch: 'Passwords do not match',
                emailRequired: 'Please enter email',
                passwordRequired: 'Please enter password',
                nameRequired: 'Please enter name',
            },
            healthProfile: {
                title: 'Health Profile',
                subtitle: 'Please fill in your basic health information',
                basicInfo: 'Basic Information',
                birthDate: 'Birth Date',
                gender: 'Gender',
                male: 'Male',
                female: 'Female',
                other: 'Other',
                height: 'Height (cm)',
                weight: 'Weight (kg)',
                medicalHistory: 'Medical History',
                medicalHistoryHint: 'Please describe your main medical history',
                allergies: 'Allergies',
                allergiesHint: 'Please list medications you are allergic to',
                saveSuccess: 'Health profile saved successfully',
                saveError: 'Save failed, please try again later',
                required: 'Please complete your health profile first',
                birthDateRequired: 'Please enter birth date',
                genderRequired: 'Please select gender',
                heightRequired: 'Please enter height',
                weightRequired: 'Please enter weight',
            },
            nav: {
                home: 'Home',
                records: 'Records',
                reminders: 'Reminders',
                profile: 'Profile',
                medications: 'Medications',
            },
            landing: {
                goodMorning: 'Good morning',
                goodAfternoon: 'Good afternoon',
                goodEvening: 'Good evening',
                user: 'User',
                todayMedication: "Today's Medications",
                pending: 'Pending',
                completed: 'Completed',
                missed: 'Missed',
                nextReminder: 'Next reminder',
                tomorrowReminder: 'Tomorrow',
                noSchedule: 'No medication schedule',
                quickActions: 'Quick Actions',
                scanRecord: 'Scan Record',
                scanRecordDesc: 'Photo scan prescription',
                reminders: 'Reminders',
                remindersDesc: 'Manage schedules',
                healthProfile: 'Health Profile',
                healthProfileDesc: 'Personal health info',
                drugGuide: 'Drug Guide',
                drugGuideDesc: 'Drug knowledge base',
                recentRecords: 'Recent Records',
                noRecords: 'No medication records',
                takeMedicine: 'Take',
            },
            schedule: {
                title: 'Medication Schedule',
                todayMedication: "Today's Medications",
                allSchedules: 'All Schedules',
                noScheduleToday: 'No medications scheduled for today',
                addSchedule: 'Add Schedule',
                editSchedule: 'Edit Schedule',
                deleteConfirm: 'Are you sure you want to delete this schedule?',
                medicationName: 'Medication Name',
                medicationNamePlaceholder: 'e.g., Amoxicillin Capsule',
                medicationNameRequired: 'Please enter medication name',
                dosage: 'Dosage',
                dosagePlaceholder: 'e.g., 0.5g / 1 capsule',
                frequency: 'Frequency',
                reminderTime: 'Reminder Time',
                addReminderTime: 'Add Reminder Time',
                duration: 'Duration (days)',
                instructions: 'Instructions',
                instructionsPlaceholder: 'e.g., Take after meals',
                confirmTake: 'Confirm Taken',
                taken: 'Taken',
                feedback: 'Feedback',
                scheduleCount: '{{total}} schedules total, {{active}} active today',
            },
            frequency: {
                onceDaily: 'Once daily',
                twiceDaily: 'Twice daily',
                thriceDaily: '3 times daily',
                fourTimesDaily: '4 times daily',
                asNeeded: 'As needed',
            },
            feedback: {
                title: 'Medication Feedback',
                selectMedication: 'Select Medication',
                selectMedicationPlaceholder: 'Select medication...',
                howDoYouFeel: 'How do you feel after taking the medication?',
                voiceInput: 'Voice Input',
                textInput: 'Text Input',
                pressToSpeak: 'Press and hold to speak',
                voiceUnavailable: 'Voice recognition is not available on this device',
                useTextInput: 'Use text input',
                recording: 'Recording...',
                tapToRecord: 'Tap to start recording',
                speakYourFeelings: 'Speak your feelings...',
                clear: 'Clear',
                describeFeelings: 'Describe your feelings',
                textPlaceholder: 'e.g., Feeling better after taking the medication, but slightly dizzy...',
                sideEffectsTitle: 'Any of the following symptoms? (Select multiple)',
                save: 'Save Feedback',
                saved: 'Feedback saved',
                medicationRequired: 'Please select a medication',
                contentRequired: 'Please enter feedback content',
            },
            mood: {
                good: 'Feeling good',
                neutral: 'Same as usual',
                bad: 'Feeling unwell',
            },
            sideEffects: {
                dizziness: 'Dizziness',
                nausea: 'Nausea',
                fatigue: 'Fatigue',
                insomnia: 'Insomnia',
                appetiteLoss: 'Loss of appetite',
                rash: 'Rash',
                diarrhea: 'Diarrhea',
                constipation: 'Constipation',
                dryMouth: 'Dry mouth',
                other: 'Other',
            },
            upload: {
                title: 'Upload Medical Record',
                profileRequired: 'Please complete your health profile first',
                profileRequiredDesc: 'Before uploading records, please fill in your basic health information',
                goToProfile: 'Go to Health Profile',
                step1Title: 'Step 1: Upload medical record photo',
                step1Hint: 'Please take or select a photo of your prescription or medical record',
                takePhoto: 'Take Photo',
                fromGallery: 'From Gallery',
                step2Title: 'Step 2: Confirm photo',
                retake: 'Retake',
                startRecognize: 'Start Recognition',
                recognizing: 'Recognizing...',
                step3Title: 'Step 3: Confirm medication info',
                step3Hint: 'Please verify the results below, you can edit manually',
                medicationNumber: 'Medication {{number}}',
                medicationName: 'Medication Name',
                medicationNamePlaceholder: 'Enter medication name',
                dosage: 'Dosage',
                dosagePlaceholder: 'e.g., 0.5g',
                frequencyLabel: 'Frequency',
                frequencyPlaceholder: 'e.g., 3 times daily',
                instructionsLabel: 'Instructions',
                addMedication: 'Add medication manually',
                reupload: 'Re-upload',
                confirmAndSave: 'Confirm and Save',
            },
            agent: {
                title: 'Drug Analysis',
                inputPlaceholder: 'Enter drug name...',
                analyze: 'Analyze',
                analyzing: 'Analyzing...',
                retry: 'Retry',
                standardName: 'Standard Name',
                riskAlerts: 'Risk Alerts',
                summary: 'Analysis Summary',
                keyPoints: 'Key Points',
                warnings: 'Warnings',
                sideEffects: 'Common Side Effects',
                foodInteractions: 'Food Interactions',
                adverseStats: 'Adverse Event Statistics',
                totalReports: 'Total Reports',
                seriousRate: 'Serious Event Rate',
                topReactions: 'Top Reactions',
                dataSource: 'Data Source',
                dataRange: 'Data Range',
                lastUpdated: 'Last Updated',
                sources: 'Information Sources',
                source: 'Source',
                newAnalysis: 'Analyze Another Drug',
                emptyHint: 'Enter drug name to start analysis',
                emptySubHint: 'Supports Chinese and English drug names',
            },
            common: {
                back: 'Back',
            },
        },
    },
};

// 初始化i18n
i18n
    .use(LanguageDetector)
    .use(initReactI18next)
    .init({
        resources,
        fallbackLng: 'zh-CN',
        detection: {
            // 检测顺序：先检查 localStorage，再检查系统语言
            order: ['localStorage', 'navigator'],
            // 持久化到 localStorage
            caches: ['localStorage'],
            // localStorage 的 key
            lookupLocalStorage: 'i18nextLng',
        },
        interpolation: {
            escapeValue: false,
        },
    });

export default i18n;
